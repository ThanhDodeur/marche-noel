(this["webpackJsonpmarche-noel"]=this["webpackJsonpmarche-noel"]||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/snowflake.c1c98c92.svg"},,,,,,,,function(e,t,a){e.exports=a(33)},,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(8),l=a.n(c),r=(a(22),a(2)),i=a(9),u=a.n(i);a(23);var o=function(e){return s.a.createElement("div",{className:"accueil noselect"},s.a.createElement("img",{src:u.a,className:"App-logo",alt:"logo"}),s.a.createElement("p",null,"March\xe9 de No\xebl"))},m=a(10),p=a(6),d=a(1),f=a.n(d),v=a(4),h=a(11),E=a(12),g=a(15),y=a(13);a(25),a(26);var b=function(e){var t=e.buttons,a=void 0===t?[]:t;return s.a.createElement("nav",{className:"navbar"},a.map((function(e,t){return s.a.createElement("div",{key:t,className:"nav-button clickable noselect ".concat(e.className),onClick:e.callBack},s.a.createElement("span",null,e.fa&&s.a.createElement("i",{className:"fa ".concat(e.fa," inline spaced")}),s.a.createElement("span",{className:"inline"},e.content)))})))};a(27),a(28),a(29);var _=function(e){var t=e.customers;return s.a.createElement("div",null,s.a.createElement("h2",null,"Liste Client:"),Object.keys(t).map((function(e){return s.a.createElement("div",{className:"entry",key:"cust_"+e},s.a.createElement("span",null,"[client: ",e,"] - "),s.a.createElement("span",null,"total pay\xe9: ",t[e].paidTotal,"\u20ac"),s.a.createElement("span",null," | "),s.a.createElement("span",null,"a re\xe7u pour un total de: ",t[e].suppliedTotal,"\u20ac"))})))};a(30);var k=function(e){var t=e.missedPayments;return s.a.createElement("div",null,s.a.createElement("h2",null,"Paiements incorrectes:"),Object.keys(t).map((function(e){return s.a.createElement("div",{className:"entry",key:"missed_"+e},s.a.createElement("span",null,"[client: ",e,"] - "),s.a.createElement("span",null,"Argent Manquant: ",t[e],"\u20ac"))})))};var N=function(e){var t=e.day,a=e.index,n=e.dailyAccounting;return s.a.createElement("div",{className:"day",key:a},s.a.createElement("h1",null,t.dayName),s.a.createElement("div",{className:"day-data"},s.a.createElement("div",null,"Total des paiements manqu\xe9s: ",t.dailyLoss,"\u20ac"),s.a.createElement("div",null,"Tickets de tombola vendus: ",function(e){return n[e]&&n[e].tombolaTickets}(t.dayName)),s.a.createElement("div",null,"Moyenne de d\xe9pense des clients: ",t.customersAverage,"\u20ac"),s.a.createElement(_,{customers:t.customers}),s.a.createElement(k,{missedPayments:t.missedPayments})))};var j=function(e){var t=e.days,a=e.costTotal,n=e.supplierTotal,c=e.dailyAccounting,l=e.ticketPrice;function r(){for(var e=0,t=0,a=Object.values(c);t<a.length;t++){e+=a[t].tombolaTickets||0}return e}return s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"global-stats"},s.a.createElement("h3",null,"B\xe9n\xe9fices"),s.a.createElement("div",null,s.a.createElement("span",null,"B\xe9n\xe9fices des vendeurs:")," ",s.a.createElement("span",null,n,"\u20ac")),s.a.createElement("div",null,s.a.createElement("span",null,"Vente de tombola:")),s.a.createElement("div",null,s.a.createElement("span",null,r()," x ",l,"\u20ac: "),s.a.createElement("span",null," ",l*r(),"\u20ac ")),s.a.createElement("div",null,s.a.createElement("span",null,s.a.createElement("i",{className:"fa fa-minus icon"}),"Total des frais:")," ",s.a.createElement("span",null,a,"\u20ac")),s.a.createElement("div",{className:"separated"},s.a.createElement("span",null,"B\xe9n\xe9fices net du march\xe9:")," ",s.a.createElement("span",null,n+l*r()-a,"\u20ac")),!!t.length&&s.a.createElement("span",{className:"divider"},"_________________________________________________________"),t.map((function(e,t){return s.a.createElement(N,{day:e,key:t,dailyAccounting:c,index:t})}))),s.a.createElement("div",{className:"global-stats"},s.a.createElement("h3",null,"Statistiques"),function(){for(var e=Object.values(t),a=0,n=0,c=0,l=e;c<l.length;c++){var i=l[c];a+=i.customersAverage,n+=Object.keys(i.customers).length}return s.a.createElement("div",{className:"daily-stats"},s.a.createElement("div",null,s.a.createElement("span",null,"Moyenne des d\xe9penses:")," ",s.a.createElement("span",null,a/(e.length||1),"\u20ac")),s.a.createElement("div",null,s.a.createElement("span",null,"Tickets de tombola Vendus:")," ",s.a.createElement("span",null,r())),s.a.createElement("div",null,s.a.createElement("span",null,"Quantit\xe9 de fiches pay\xe9es:")," ",s.a.createElement("span",null,n)))}()))},O=a(14),T=a(16),A=function(){},w=function(e){e.value;var t=e.label,a=void 0===t?"Upload":t,n=e.onChange,c=void 0===n?A:n,l=Object(T.a)(e,["value","label","onChange"]);return s.a.createElement("span",null,s.a.createElement("label",null,s.a.createElement("span",{className:"clickable"},a),s.a.createElement("input",Object.assign({},l,{style:{display:"none"},type:"file",onChange:function(e){c(Object(O.a)(e.target.files)),e.target.value=null}}))))};a(31);var S=function(e){var t=e.eventAccounting,a=e.dailyAccounting,c=e.ticketPrice,l=e.dayList,i=e.save,u=Object(n.useState)(t||{}),o=Object(r.a)(u,2),m=o[0],p=o[1],d=Object(n.useState)(c||0),f=Object(r.a)(d,2),v=f[0],h=f[1],E=Object(n.useState)(a||{}),g=Object(r.a)(E,2),y=g[0],b=g[1],_=["Salle","Transactions","Assurance","Papeterie","Timbres","Courses","Traiteur","Schmitz","Autre"];function k(e){return y&&y[e]&&y[e].tombolaTickets||0}function N(e){return m[e]||0}return Object(n.useEffect)((function(){return function(){i({eventAccounting:m,ticketPrice:v,dailyAccounting:y})}}),[m,v,y]),s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"form"},s.a.createElement("div",{className:"input-grid left"},_.map((function(e){return s.a.createElement("div",null,s.a.createElement("span",{className:"accounting-span"},e,": "),s.a.createElement("input",{className:"accounting-input",onChange:function(t){!function(e,t){var a=Object.assign({},m);a[e]=t,p(a)}(e,Number(t.target.value))},pattern:"[0-9]*",type:"number",value:N(e)})," \u20ac")}))),s.a.createElement("div",{className:"input-grid right"},s.a.createElement("div",null,s.a.createElement("span",{className:"accounting-span"}," Prix des tickets: "),s.a.createElement("input",{className:"accounting-input",onChange:function(e){h(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:v}),"\u20ac"),l.map((function(e){return s.a.createElement("div",null,s.a.createElement("h3",null,e),s.a.createElement("div",null,s.a.createElement("span",{className:"accounting-span"}," Tickets de tombola: "),s.a.createElement("input",{className:"accounting-input",onChange:function(t){!function(e,t){var a=Object.assign({},y);a[e]||(a[e]={}),a[e].tombolaTickets=t,b(a)}(e,Number(t.target.value))},pattern:"[0-9]*",type:"number",value:k(e)})))})))))},F=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this))._readFile=function(){var e=Object(v.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FileReader).readAsText(t),e.abrupt("return",new Promise((function(e){a.onload=function(t){e(a.result)}})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n._processFiles=function(){var e=Object(v.a)(f.a.mark((function e(t){var a,s,c,l,i,u,o,m,p;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],s={},c=0,l=Object.entries(t);case 3:if(!(c<l.length)){e.next=14;break}return i=Object(r.a)(l[c],2),u=i[0],o=i[1],e.next=7,n._readFile(o);case 7:m=e.sent,p=n._computeFile({dayName:u,page:m,suppliers:s}),s=p.suppliers,a.push(p.day);case 11:c++,e.next=3;break;case 14:n.setState({days:a,suppliers:s});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n._computeFile=function(e){var t,a=e.dayName,s=e.page,c=e.suppliers,l=s.split(/\r\n|\n/),r=Object(p.a)(Array(1));try{for(r.s();!(t=r.n()).done;){t.value;l.shift()}}catch(m){r.e(m)}finally{r.f()}l.shift().split(",");for(var i={};l.length;){var u=l.shift().split(",");u[0]&&(i[u[0]]=i[u[0]]||{paid:[],paidTotal:0,supplied:[],suppliedTotal:0},i[u[0]].paidTotal+=Number(u[3].replace(",",".")),i[u[0]].paid.push({name:u[2],price:u[3],supplierId:u[1]})),u[4]&&u[5]&&(i[u[5]]=i[u[5]]||{paid:[],paidTotal:0,supplied:[],suppliedTotal:0},i[u[5]].suppliedTotal+=Number(u[7].replace(",",".")),i[u[5]].supplied.push({name:u[6],price:u[7],supplierId:u[4]}),c[u[4]]=c[u[4]]||{total:0},c[u[4]].total+=Number(u[7].replace(",",".")))}var o=n._computeDailyStats(i);return{day:{dayName:a,customers:i,missedPayments:o.missedPayments,dailyLoss:o.dailyLoss,customersAverage:o.customersAverage},suppliers:c}},n._computeDailyStats=function(e){for(var t={},a=0,n=0,s=Object.keys(e),c=0,l=s;c<l.length;c++){var r=l[c],i=e[r].paidTotal,u=e[r].suppliedTotal-i;n+=i,0!==u&&(t[r]=u,a+=u)}return{missedPayments:t,dailyLoss:a,customersTotal:n,customersAverage:n/(s.length||0)}},n.onFileInputChange=function(){var e=Object(v.a)(f.a.mark((function e(t,a){var s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=t[0],n.setState({files:Object.assign({},n.state.files,Object(m.a)({},a,s))});case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.onEventFormSave=function(){var e=Object(v.a)(f.a.mark((function e(t){var a,s,c,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.eventAccounting,s=t.dailyAccounting,c=t.ticketPrice,l=0,Object.values(a).forEach((function(e){return l+=e})),n.setState({eventAccounting:a,ticketPrice:c,dailyAccounting:s,costTotal:l});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.computeResults=Object(v.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._processFiles(n.state.files);case 2:t=0,Object.values(n.state.suppliers).forEach((function(e){return t+=e.total})),n.setState({supplierTotal:t});case 5:case"end":return e.stop()}}),e)}))),n.resetFiles=function(){n.setState({files:[],days:[],pages:[],supplierTotal:0}),n.toggleReset()},n.toggleReset=function(){n.setState({resetRequested:!n.state.resetRequested})},n.toggleEventForm=function(){var e=n.state.showForm;n.setState({showForm:!e}),e&&n.computeResults()},n.state={files:{},days:[],suppliers:{},resetRequested:!1,showForm:!1,eventAccounting:{},dailyAccounting:{},supplierTotal:0,costTotal:0,ticketPrice:0},n.DAYS=["Vendredi","Samedi","Dimanche"],n}return Object(E.a)(a,[{key:"_getButtons",value:function(){var e=this,t=[];Object.keys(this.state.files).length&&(t=[{content:"Retirer les fichiers",fa:"fa-trash",className:"warning",callBack:this.toggleReset}]),this.state.resetRequested&&(t=[{content:"Annuler",fa:"fa-times",className:"green",callBack:this.toggleReset},{content:"Confirmer",fa:"fa-check",className:"alert",callBack:this.resetFiles}]);var a,n=[],c=Object(p.a)(this.DAYS);try{var l=function(){var t=a.value;n.push({className:e.state.files[t]?"green":"alert",fa:"fa-upload",content:s.a.createElement(w,{label:t,className:"noselect",value:e.state.files[t],onChange:function(a){e.onFileInputChange(a,t)}})})};for(c.s();!(a=c.n()).done;)l()}catch(i){c.e(i)}finally{c.f()}var r=[{className:(this.state.showForm?"active":"")+" purple",fa:"fa-eur",content:"Comptabilit\xe9",callBack:this.toggleEventForm}].concat(n,t);return!Object.keys(this.state.files).length||this.state.showForm||this.state.resetRequested||r.push({content:"Calculer",fa:"fa-plus",className:"green",callBack:this.computeResults}),r}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(b,{buttons:this._getButtons()}),this.state.showForm?s.a.createElement(S,{eventAccounting:this.state.eventAccounting,dailyAccounting:this.state.dailyAccounting,dayList:this.DAYS,ticketPrice:this.state.ticketPrice,save:this.onEventFormSave}):s.a.createElement(j,{days:this.state.days,dailyAccounting:this.state.dailyAccounting,ticketPrice:this.state.ticketPrice,costTotal:this.state.costTotal,supplierTotal:this.state.supplierTotal}))}}]),a}(s.a.Component);a(32);var P=function(e){var t=Object(n.useState)({open:!1}),a=Object(r.a)(t,2),c=a[0],l=a[1];return s.a.createElement("div",{className:"page"},c.open?s.a.createElement("div",{className:"page"},s.a.createElement(F,{menu:""})):s.a.createElement("div",{className:"page clickable",onClick:function(){l({open:!c.open})}},s.a.createElement(o,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[17,1,2]]]);
//# sourceMappingURL=main.4ce763ef.chunk.js.map