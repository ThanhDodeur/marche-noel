(this["webpackJsonpmarche-noel"]=this["webpackJsonpmarche-noel"]||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/snowflake.c1c98c92.svg"},,,,,,function(e,t,a){e.exports=a(32)},,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(9),l=a.n(s),c=(a(21),a(1)),u=a(10),i=a.n(u);a(22);var o=function(e){return r.a.createElement("div",{className:"accueil noselect"},r.a.createElement("img",{src:i.a,className:"App-logo",alt:"logo"}),r.a.createElement("p",null,"March\xe9 de No\xebl"))},m=a(6),p=a(7),v=a(2),f=a.n(v),d=a(4),h=a(11),E=a(12),b=a(14),g=a(13);a(24),a(25);var y=function(e){var t=e.buttons,a=void 0===t?[]:t;return r.a.createElement("nav",{className:"navbar"},a.map((function(e,t){return r.a.createElement("div",{key:t,className:"nav-button clickable noselect ".concat(e.className),onClick:e.callBack},r.a.createElement("span",null,e.fa&&r.a.createElement("i",{className:"fa ".concat(e.fa," inline spaced")}),r.a.createElement("span",{className:"inline"},e.content)))})))};a(26),a(27),a(28);var N=function(e){var t=e.customers;return r.a.createElement("div",null,r.a.createElement("h2",null,"Liste Client:"),Object.keys(t).map((function(e){return r.a.createElement("div",{className:"entry",key:"cust_"+e},r.a.createElement("span",null,"[client: ",e,"] - "),r.a.createElement("span",null,"total pay\xe9: ",t[e].paidTotal,"\u20ac"),r.a.createElement("span",null," | "),r.a.createElement("span",null,"a re\xe7u pour un total de: ",t[e].suppliedTotal,"\u20ac"))})))};a(29);var j=function(e){var t=e.missedPayments;return r.a.createElement("div",null,r.a.createElement("h2",null,"Paiements incorrectes:"),Object.keys(t).map((function(e){return r.a.createElement("div",{className:"entry",key:"missed_"+e},r.a.createElement("span",null,"[client: ",e,"] - "),r.a.createElement("span",null,"Argent Manquant: ",t[e],"\u20ac"))})))};var O=function(e){var t=e.day,a=e.index;return r.a.createElement("div",{className:"day",key:a},r.a.createElement("h1",null,"Jour ",a+1),r.a.createElement("div",{className:"day-data"},r.a.createElement("div",null,"total des paiements manqu\xe9s: ",t.dailyLoss,"\u20ac"),r.a.createElement(N,{customers:t.customers}),r.a.createElement(j,{missedPayments:t.missedPayments})))};var k=function(e){var t=e.days,a=e.costTotal,n=e.eventTotal,s=e.supplierTotal;return r.a.createElement("div",{className:"content"},r.a.createElement("div",null,r.a.createElement("h1",null,"March\xe9 De No\xebl"),r.a.createElement("div",null,"co\xfbt total des frais: ",a,"\u20ac"),r.a.createElement("div",null,"Benef des vendeurs: ",s,"\u20ac"),r.a.createElement("div",null,"Benef Net du march\xe9: ",n,"\u20ac"),t.map((function(e,t){return r.a.createElement(O,{day:e,key:t,index:t})}))))},T=a(15),w=function(){},C=function(e){e.value;var t=e.label,a=void 0===t?"Upload":t,n=e.onChange,s=void 0===n?w:n,l=Object(T.a)(e,["value","label","onChange"]);return r.a.createElement("span",null,r.a.createElement("label",null,r.a.createElement("span",{className:"clickable"},a),r.a.createElement("input",Object.assign({},l,{style:{display:"none"},type:"file",onChange:function(e){s(Object(m.a)(e.target.files)),e.target.value=null},multiple:!0}))))};a(30);var F=function(e){var t=e.eventAccounting,a=e.save,s=Object(n.useState)(t.room),l=Object(c.a)(s,2),u=l[0],i=l[1],o=Object(n.useState)(t.transaction),m=Object(c.a)(o,2),p=m[0],v=m[1],f=Object(n.useState)(t.insurance),d=Object(c.a)(f,2),h=d[0],E=d[1],b=Object(n.useState)(t.paper),g=Object(c.a)(b,2),y=g[0],N=g[1],j=Object(n.useState)(t.stamps),O=Object(c.a)(j,2),k=O[0],T=O[1],w=Object(n.useState)(t.groceries),C=Object(c.a)(w,2),F=C[0],S=C[1],R=Object(n.useState)(t.traiteur),x=Object(c.a)(R,2),A=x[0],B=x[1],_=Object(n.useState)(t.schmitz),P=Object(c.a)(_,2),q=P[0],I=P[1];return r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"input-grid"},r.a.createElement("div",null,r.a.createElement("span",null,"Salle: "),r.a.createElement("input",{onChange:function(e){i(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:u})," \u20ac"),r.a.createElement("div",null,r.a.createElement("span",null,"Transactions: "),r.a.createElement("input",{onChange:function(e){v(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:p})," \u20ac"),r.a.createElement("div",null,r.a.createElement("span",null,"Assurance: "),r.a.createElement("input",{onChange:function(e){E(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:h})," \u20ac"),r.a.createElement("div",null,r.a.createElement("span",null,"Papeterie: "),r.a.createElement("input",{onChange:function(e){N(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:y})," \u20ac"),r.a.createElement("div",null,r.a.createElement("span",null,"Timbres: "),r.a.createElement("input",{onChange:function(e){T(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:k})," \u20ac"),r.a.createElement("div",null,r.a.createElement("span",null,"Courses: "),r.a.createElement("input",{onChange:function(e){S(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:F})," \u20ac"),r.a.createElement("div",null,r.a.createElement("span",null,"Traiteur: "),r.a.createElement("input",{onChange:function(e){B(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:A})," \u20ac"),r.a.createElement("div",null,r.a.createElement("span",null,"Schmitz: "),r.a.createElement("input",{onChange:function(e){I(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:q})," \u20ac")),r.a.createElement("div",{className:"form-button",onClick:function(){a({room:u,transaction:p,insurance:h,paper:y,stamps:k,groceries:F,traiteur:A,schmitz:q})}},r.a.createElement("span",null,"ENREGISTRER"))))},S=function(e){Object(b.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this))._readFile=function(){var e=Object(d.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FileReader).readAsText(t),e.abrupt("return",new Promise((function(e){a.onload=function(t){e(a.result)}})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n._processFiles=function(){var e=Object(d.a)(f.a.mark((function e(t){var a,r,s,l,c,u,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],r={},s=Object(p.a)(t),e.prev=3,s.s();case 5:if((l=s.n()).done){e.next=15;break}return c=l.value,e.next=9,n._readFile(c);case 9:u=e.sent,i=n._computeFile(u,r),r=i.suppliers,a.push(i.day);case 13:e.next=5;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),s.e(e.t0);case 20:return e.prev=20,s.f(),e.finish(20);case 23:n.setState({days:a,suppliers:r});case 24:case"end":return e.stop()}}),e,null,[[3,17,20,23]])})));return function(t){return e.apply(this,arguments)}}(),n._computeFile=function(e,t){var a,r=e.split(/\r\n|\n/),s=Object(p.a)(Array(1));try{for(s.s();!(a=s.n()).done;){a.value;r.shift()}}catch(i){s.e(i)}finally{s.f()}r.shift().split(",");for(var l={};r.length;){var c=r.shift().split(",");c[0]&&(l[c[0]]=l[c[0]]||{paid:[],paidTotal:0,supplied:[],suppliedTotal:0},l[c[0]].paidTotal+=Number(c[3].replace(",",".")),l[c[0]].paid.push({name:c[2],price:c[3],supplierId:c[1]})),c[4]&&c[5]&&(l[c[5]]=l[c[5]]||{paid:[],paidTotal:0,supplied:[],suppliedTotal:0},l[c[5]].suppliedTotal+=Number(c[7].replace(",",".")),l[c[5]].supplied.push({name:c[6],price:c[7],supplierId:c[4]}),t[c[4]]=t[c[4]]||{total:0},t[c[4]].total+=Number(c[7].replace(",",".")))}var u=n._computeMissedPayments(l);return{day:{customers:l,missedPayments:u.missedPayments,dailyLoss:u.dailyLoss},suppliers:t}},n._computeMissedPayments=function(e){for(var t={},a=0,n=0,r=Object.keys(e);n<r.length;n++){var s=r[n],l=e[s].suppliedTotal-e[s].paidTotal;0!==l&&(t[s]=l,a+=l)}return{missedPayments:t,dailyLoss:a}},n.onFileInputChange=function(){var e=Object(d.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({files:[].concat(Object(m.a)(n.state.files),Object(m.a)(t))});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onEventFormSave=function(){var e=Object(d.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=0,Object.values(t).forEach((function(e){return a+=e})),n.setState({eventAccounting:t,costTotal:a,showForm:!1}),n.computeResults();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.computeResults=Object(d.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._processFiles(n.state.files);case 2:t=0,Object.values(n.state.suppliers).forEach((function(e){return t+=e.total})),a=t-n.state.costTotal,n.setState({eventTotal:a,supplierTotal:t});case 6:case"end":return e.stop()}}),e)}))),n.resetFiles=function(){n.setState({files:[],days:[],pages:[]}),n.toggleReset()},n.toggleReset=function(){n.setState({resetRequested:!n.state.resetRequested})},n.toggleEventForm=function(){n.setState({showForm:!n.state.showForm})},n.state={files:[],days:[],suppliers:{},resetRequested:!1,showForm:!1,eventAccounting:{room:0,transaction:0,insurance:0,paper:0,stamps:0,groceries:0,traiteur:0,schmitz:0},supplierTotal:0,costTotal:0,eventTotal:0},n}return Object(E.a)(a,[{key:"_getButtons",value:function(){var e=[];this.state.files.length&&(e=[{content:"Retirer les fichiers",fa:"fa-trash",className:"warning",callBack:this.toggleReset}]),this.state.resetRequested&&(e=[{content:"Annuler",fa:"fa-times",className:"green",callBack:this.toggleReset},{content:"Confirmer",fa:"fa-check",className:"alert",callBack:this.resetFiles}]);var t=[{className:"blue",fa:"fa-upload",content:r.a.createElement(C,{label:"Ajouter | jours: ".concat(this.state.files.length),className:"noselect",value:this.state.files,onChange:this.onFileInputChange})},{className:(this.state.showForm?"active":"")+" purple",fa:"fa-eur",content:"Comptabilit\xe9",callBack:this.toggleEventForm}].concat(e);return this.state.files.length&&!this.state.showForm&&t.push({content:"Calculer",fa:"fa-plus",className:"green",callBack:this.computeResults}),t}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(y,{buttons:this._getButtons()}),!!this.state.showForm&&r.a.createElement(F,{eventAccounting:this.state.eventAccounting,save:this.onEventFormSave}),!!this.state.days.length&&!this.state.showForm&&r.a.createElement(k,{days:this.state.days,costTotal:this.state.costTotal,eventTotal:this.state.eventTotal,supplierTotal:this.state.supplierTotal}))}}]),a}(r.a.Component);a(31);var R=function(e){var t=Object(n.useState)({open:!1}),a=Object(c.a)(t,2),s=a[0],l=a[1];return r.a.createElement("div",{className:"page"},s.open?r.a.createElement("div",{className:"page"},r.a.createElement(S,{menu:""})):r.a.createElement("div",{className:"page clickable",onClick:function(){l({open:!s.open})}},r.a.createElement(o,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[16,1,2]]]);
//# sourceMappingURL=main.283bff8a.chunk.js.map