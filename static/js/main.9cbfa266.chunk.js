(this["webpackJsonpmarche-noel"]=this["webpackJsonpmarche-noel"]||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/snowflake.c1c98c92.svg"},,,,,,,,function(e,t,a){e.exports=a(33)},,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(8),s=a.n(l),r=(a(22),a(1)),i=a(9),u=a.n(i);a(23);var o=function(e){return c.a.createElement("div",{className:"accueil noselect"},c.a.createElement("img",{src:u.a,className:"App-logo",alt:"logo"}),c.a.createElement("p",null,"March\xe9 de No\xebl"))},m=a(10),p=a(6),d=a(2),v=a.n(d),f=a(4),g=a(11),E=a(12),h=a(15),b=a(13);a(25),a(26);var _=function(e){var t=e.buttons,a=void 0===t?[]:t;return c.a.createElement("nav",{className:"navbar"},a.map((function(e,t){return c.a.createElement("div",{key:t,className:"nav-button clickable noselect ".concat(e.className),onClick:e.callBack},c.a.createElement("span",null,e.fa&&c.a.createElement("i",{className:"fa ".concat(e.fa," inline spaced")}),c.a.createElement("span",{className:"inline"},e.content)))})))};a(27),a(28),a(29);var y=function(e){var t=e.customers;return c.a.createElement("div",null,c.a.createElement("h2",null,"Liste Client:"),Object.keys(t).map((function(e){return c.a.createElement("div",{className:"entry",key:"cust_"+e},c.a.createElement("span",null,"[client: ",e,"] - "),c.a.createElement("span",null,"total pay\xe9: ",t[e].paidTotal,"\u20ac"),c.a.createElement("span",null," | "),c.a.createElement("span",null,"a re\xe7u pour un total de: ",t[e].suppliedTotal,"\u20ac"))})))};a(30);var N=function(e){var t=e.missedPayments;return c.a.createElement("div",null,c.a.createElement("h2",null,"Paiements incorrectes:"),Object.keys(t).map((function(e){return c.a.createElement("div",{className:"entry",key:"missed_"+e},c.a.createElement("span",null,"[client: ",e,"] - "),c.a.createElement("span",null,"Argent Manquant: ",t[e],"\u20ac"))})))};var k=function(e){var t=e.day,a=e.index,n=e.dailyAccounting;return c.a.createElement("div",{className:"day",key:a},c.a.createElement("h1",null,t.dayName),c.a.createElement("div",{className:"day-data"},c.a.createElement("div",null,"Total des paiements manqu\xe9s: ",t.dailyLoss,"\u20ac"),c.a.createElement("div",null,"Tickets de tombola vendus: ",function(e){return n[e]&&n[e].tombolaTickets||0}(t.dayName)),c.a.createElement("div",null,"Moyenne de d\xe9pense des clients: ",t.customersAverage,"\u20ac"),c.a.createElement(y,{customers:t.customers}),c.a.createElement(N,{missedPayments:t.missedPayments})))};var j=function(e){var t=e.days,a=e.costTotal,n=e.supplierTotal,l=e.dailyAccounting,s=e.ticketPrice;function r(){for(var e=0,t=0,a=Object.values(l);t<a.length;t++){e+=a[t].tombolaTickets||0}return e}return c.a.createElement("div",{className:"content"},c.a.createElement("div",{className:"global-stats"},c.a.createElement("h3",null,"B\xe9n\xe9fices"),c.a.createElement("div",null,c.a.createElement("span",null,"B\xe9n\xe9fices des vendeurs:")," ",c.a.createElement("span",null,n,"\u20ac")),c.a.createElement("div",null,c.a.createElement("span",null,"Vente de tombola:")),c.a.createElement("div",null,c.a.createElement("span",null,r()," x ",s,"\u20ac: "),c.a.createElement("span",null," ",s*r(),"\u20ac ")),c.a.createElement("div",null,c.a.createElement("span",null,c.a.createElement("i",{className:"fa fa-minus icon"}),"Total des frais:")," ",c.a.createElement("span",null,a,"\u20ac")),c.a.createElement("div",{className:"separated"},c.a.createElement("span",null,"B\xe9n\xe9fices net du march\xe9:")," ",c.a.createElement("span",null,n-a,"\u20ac")),c.a.createElement("div",{class:"divider"},"_________________________________________________________"),t.map((function(e,t){return c.a.createElement(k,{day:e,key:t,dailyAccounting:l,index:t})}))),c.a.createElement("div",{className:"global-stats"},c.a.createElement("h3",null,"Statistiques"),function(){for(var e=Object.values(t),a=0,n=0,l=0,s=e;l<s.length;l++){var i=s[l];a+=i.customersAverage,n+=Object.keys(i.customers).length}return c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("span",null,"Moyenne des d\xe9penses:")," ",c.a.createElement("span",null,a/(e.length||1),"\u20ac")),c.a.createElement("div",null,c.a.createElement("span",null,"Tickets de tombola Vendus:")," ",c.a.createElement("span",null,r())),c.a.createElement("div",null,c.a.createElement("span",null,"Quantit\xe9 de fiches pay\xe9es:")," ",c.a.createElement("span",null,n)))}(),c.a.createElement("div",null,"_________________________")))},O=a(14),T=a(16),A=function(){},S=function(e){e.value;var t=e.label,a=void 0===t?"Upload":t,n=e.onChange,l=void 0===n?A:n,s=Object(T.a)(e,["value","label","onChange"]);return c.a.createElement("span",null,c.a.createElement("label",null,c.a.createElement("span",{className:"clickable"},a),c.a.createElement("input",Object.assign({},s,{style:{display:"none"},type:"file",onChange:function(e){l(Object(O.a)(e.target.files)),e.target.value=null}}))))};a(31);var w=function(e){var t=e.eventAccounting,a=e.dailyAccounting,l=e.ticketPrice,s=e.dayList,i=e.save,u=Object(n.useState)(t.room||0),o=Object(r.a)(u,2),m=o[0],p=o[1],d=Object(n.useState)(t.transaction||0),v=Object(r.a)(d,2),f=v[0],g=v[1],E=Object(n.useState)(t.insurance||0),h=Object(r.a)(E,2),b=h[0],_=h[1],y=Object(n.useState)(t.paper||0),N=Object(r.a)(y,2),k=N[0],j=N[1],O=Object(n.useState)(t.stamps||0),T=Object(r.a)(O,2),A=T[0],S=T[1],w=Object(n.useState)(t.groceries||0),C=Object(r.a)(w,2),F=C[0],P=C[1],R=Object(n.useState)(t.traiteur||0),x=Object(r.a)(R,2),B=x[0],q=x[1],L=Object(n.useState)(t.schmitz||0),D=Object(r.a)(L,2),I=D[0],M=D[1],z=Object(n.useState)(t.other||0),V=Object(r.a)(z,2),Y=V[0],J=V[1],W=Object(n.useState)(l||0),G=Object(r.a)(W,2),Q=G[0],U=G[1],$=Object(n.useState)(a||{}),H=Object(r.a)($,2),K=H[0],X=H[1];function Z(e){return K&&K[e]&&K[e].tombolaTickets||0}return c.a.createElement("div",{className:"content"},c.a.createElement("div",{className:"form"},c.a.createElement("div",{className:"input-grid left"},c.a.createElement("div",null,c.a.createElement("span",{className:"accounting-span"},"Salle: "),c.a.createElement("input",{className:"accounting-input",onChange:function(e){p(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:m})," \u20ac"),c.a.createElement("div",null,c.a.createElement("span",{className:"accounting-span"},"Transactions: "),c.a.createElement("input",{className:"accounting-input",onChange:function(e){g(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:f})," \u20ac"),c.a.createElement("div",null,c.a.createElement("span",{className:"accounting-span"},"Assurance: "),c.a.createElement("input",{className:"accounting-input",onChange:function(e){_(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:b})," \u20ac"),c.a.createElement("div",null,c.a.createElement("span",{className:"accounting-span"},"Papeterie: "),c.a.createElement("input",{className:"accounting-input",onChange:function(e){j(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:k})," \u20ac"),c.a.createElement("div",null,c.a.createElement("span",{className:"accounting-span"},"Timbres: "),c.a.createElement("input",{className:"accounting-input",onChange:function(e){S(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:A})," \u20ac"),c.a.createElement("div",null,c.a.createElement("span",{className:"accounting-span"},"Courses: "),c.a.createElement("input",{className:"accounting-input",onChange:function(e){P(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:F})," \u20ac"),c.a.createElement("div",null,c.a.createElement("span",{className:"accounting-span"},"Traiteur: "),c.a.createElement("input",{className:"accounting-input",onChange:function(e){q(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:B})," \u20ac"),c.a.createElement("div",null,c.a.createElement("span",{className:"accounting-span"},"Schmitz: "),c.a.createElement("input",{className:"accounting-input",onChange:function(e){M(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:I})," \u20ac"),c.a.createElement("div",null,c.a.createElement("span",{className:"accounting-span"},"Autre: "),c.a.createElement("input",{className:"accounting-input",onChange:function(e){J(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:Y})," \u20ac")),c.a.createElement("div",{className:"input-grid right"},c.a.createElement("div",null,c.a.createElement("span",{className:"accounting-span"}," Prix des tickets: "),c.a.createElement("input",{className:"accounting-input",onChange:function(e){U(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:Q}),"\u20ac"),s.map((function(e){return c.a.createElement("div",null,c.a.createElement("h3",null,e),c.a.createElement("div",null,c.a.createElement("span",{className:"accounting-span"}," Tickets de tombola: "),c.a.createElement("input",{className:"accounting-input",onChange:function(t){!function(e,t){var a=Object.assign({},K);a[e]||(a[e]={}),a[e].tombolaTickets=t,X(a)}(e,Number(t.target.value))},pattern:"[0-9]*",type:"number",value:Z(e)})))}))),c.a.createElement("div",{className:"form-button noselect clear",onClick:function(){i({eventAccounting:{room:m,transaction:f,insurance:b,paper:k,stamps:A,groceries:F,traiteur:B,schmitz:I,other:Y},ticketPrice:Q,dailyAccounting:K})}},c.a.createElement("span",null,"ENREGISTRER"))))},C=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(g.a)(this,a),(n=t.call(this))._readFile=function(){var e=Object(f.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FileReader).readAsText(t),e.abrupt("return",new Promise((function(e){a.onload=function(t){e(a.result)}})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n._processFiles=function(){var e=Object(f.a)(v.a.mark((function e(t){var a,c,l,s,i,u,o,m,p;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],c={},l=0,s=Object.entries(t);case 3:if(!(l<s.length)){e.next=14;break}return i=Object(r.a)(s[l],2),u=i[0],o=i[1],e.next=7,n._readFile(o);case 7:m=e.sent,p=n._computeFile({dayName:u,page:m,suppliers:c}),c=p.suppliers,a.push(p.day);case 11:l++,e.next=3;break;case 14:n.setState({days:a,suppliers:c});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n._computeFile=function(e){var t,a=e.dayName,c=e.page,l=e.suppliers,s=c.split(/\r\n|\n/),r=Object(p.a)(Array(1));try{for(r.s();!(t=r.n()).done;){t.value;s.shift()}}catch(m){r.e(m)}finally{r.f()}s.shift().split(",");for(var i={};s.length;){var u=s.shift().split(",");u[0]&&(i[u[0]]=i[u[0]]||{paid:[],paidTotal:0,supplied:[],suppliedTotal:0},i[u[0]].paidTotal+=Number(u[3].replace(",",".")),i[u[0]].paid.push({name:u[2],price:u[3],supplierId:u[1]})),u[4]&&u[5]&&(i[u[5]]=i[u[5]]||{paid:[],paidTotal:0,supplied:[],suppliedTotal:0},i[u[5]].suppliedTotal+=Number(u[7].replace(",",".")),i[u[5]].supplied.push({name:u[6],price:u[7],supplierId:u[4]}),l[u[4]]=l[u[4]]||{total:0},l[u[4]].total+=Number(u[7].replace(",",".")))}var o=n._computeDailyStats(i);return{day:{dayName:a,customers:i,missedPayments:o.missedPayments,dailyLoss:o.dailyLoss,customersAverage:o.customersAverage},suppliers:l}},n._computeDailyStats=function(e){for(var t={},a=0,n=0,c=Object.keys(e),l=0,s=c;l<s.length;l++){var r=s[l],i=e[r].paidTotal,u=e[r].suppliedTotal-i;n+=i,0!==u&&(t[r]=u,a+=u)}return{missedPayments:t,dailyLoss:a,customersTotal:n,customersAverage:n/(c.length||0)}},n.onFileInputChange=function(){var e=Object(f.a)(v.a.mark((function e(t,a){var c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t[0],n.setState({files:Object.assign({},n.state.files,Object(m.a)({},a,c))});case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.onEventFormSave=function(){var e=Object(f.a)(v.a.mark((function e(t){var a,c,l,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.eventAccounting,c=t.dailyAccounting,l=t.ticketPrice,s=0,Object.values(a).forEach((function(e){return s+=e})),n.setState({eventAccounting:a,ticketPrice:l,dailyAccounting:c,costTotal:s,showForm:!1}),n.computeResults();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.computeResults=Object(f.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._processFiles(n.state.files);case 2:t=0,Object.values(n.state.suppliers).forEach((function(e){return t+=e.total})),n.setState({supplierTotal:t});case 5:case"end":return e.stop()}}),e)}))),n.resetFiles=function(){n.setState({files:[],days:[],pages:[],supplierTotal:0}),n.toggleReset()},n.toggleReset=function(){n.setState({resetRequested:!n.state.resetRequested})},n.toggleEventForm=function(){n.setState({showForm:!n.state.showForm})},n.state={files:{},days:[],suppliers:{},resetRequested:!1,showForm:!1,eventAccounting:{},dailyAccounting:{},supplierTotal:0,costTotal:0,ticketPrice:0},n.DAYS=["Vendredi","Samedi","Dimanche"],n}return Object(E.a)(a,[{key:"_getButtons",value:function(){var e=this,t=[];Object.keys(this.state.files).length&&(t=[{content:"Retirer les fichiers",fa:"fa-trash",className:"warning",callBack:this.toggleReset}]),this.state.resetRequested&&(t=[{content:"Annuler",fa:"fa-times",className:"green",callBack:this.toggleReset},{content:"Confirmer",fa:"fa-check",className:"alert",callBack:this.resetFiles}]);var a,n=[],l=Object(p.a)(this.DAYS);try{var s=function(){var t=a.value;n.push({className:e.state.files[t]?"green":"alert",fa:"fa-upload",content:c.a.createElement(S,{label:t,className:"noselect",value:e.state.files[t],onChange:function(a){e.onFileInputChange(a,t)}})})};for(l.s();!(a=l.n()).done;)s()}catch(i){l.e(i)}finally{l.f()}var r=[{className:(this.state.showForm?"active":"")+" purple",fa:"fa-eur",content:"Comptabilit\xe9",callBack:this.toggleEventForm}].concat(n,t);return!Object.keys(this.state.files).length||this.state.showForm||this.state.resetRequested||r.push({content:"Calculer",fa:"fa-plus",className:"green",callBack:this.computeResults}),r}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(_,{buttons:this._getButtons()}),this.state.showForm?c.a.createElement(w,{eventAccounting:this.state.eventAccounting,dailyAccounting:this.state.dailyAccounting,dayList:this.DAYS,ticketPrice:this.state.ticketPrice,save:this.onEventFormSave}):c.a.createElement(j,{days:this.state.days,dailyAccounting:this.state.dailyAccounting,ticketPrice:this.state.ticketPrice,costTotal:this.state.costTotal,supplierTotal:this.state.supplierTotal}))}}]),a}(c.a.Component);a(32);var F=function(e){var t=Object(n.useState)({open:!1}),a=Object(r.a)(t,2),l=a[0],s=a[1];return c.a.createElement("div",{className:"page"},l.open?c.a.createElement("div",{className:"page"},c.a.createElement(C,{menu:""})):c.a.createElement("div",{className:"page clickable",onClick:function(){s({open:!l.open})}},c.a.createElement(o,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[17,1,2]]]);
//# sourceMappingURL=main.9cbfa266.chunk.js.map