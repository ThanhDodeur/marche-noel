(this["webpackJsonpmarche-noel"]=this["webpackJsonpmarche-noel"]||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/snowflake.c1c98c92.svg"},,,,,,function(e,t,a){e.exports=a(32)},,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(9),s=a.n(r),c=(a(21),a(1)),u=a(10),i=a.n(u);a(22);var o=function(e){return l.a.createElement("div",{className:"accueil noselect"},l.a.createElement("img",{src:i.a,className:"App-logo",alt:"logo"}),l.a.createElement("p",null,"March\xe9 de No\xebl"))},m=a(6),p=a(7),v=a(2),d=a.n(v),f=a(4),_=a(11),E=a(12),h=a(14),b=a(13);a(24),a(25);var g=function(e){var t=e.buttons,a=void 0===t?[]:t;return l.a.createElement("nav",{className:"navbar"},a.map((function(e,t){return l.a.createElement("div",{key:t,className:"nav-button clickable noselect ".concat(e.className),onClick:e.callBack},l.a.createElement("span",null,e.fa&&l.a.createElement("i",{className:"fa ".concat(e.fa," inline spaced")}),l.a.createElement("span",{className:"inline"},e.content)))})))};a(26),a(27),a(28);var y=function(e){var t=e.customers;return l.a.createElement("div",null,l.a.createElement("h2",null,"Liste Client:"),Object.keys(t).map((function(e){return l.a.createElement("div",{className:"entry",key:"cust_"+e},l.a.createElement("span",null,"[client: ",e,"] - "),l.a.createElement("span",null,"total pay\xe9: ",t[e].paidTotal,"\u20ac"),l.a.createElement("span",null," | "),l.a.createElement("span",null,"a re\xe7u pour un total de: ",t[e].suppliedTotal,"\u20ac"))})))};a(29);var j=function(e){var t=e.missedPayments;return l.a.createElement("div",null,l.a.createElement("h2",null,"Paiements incorrectes:"),Object.keys(t).map((function(e){return l.a.createElement("div",{className:"entry",key:"missed_"+e},l.a.createElement("span",null,"[client: ",e,"] - "),l.a.createElement("span",null,"Argent Manquant: ",t[e],"\u20ac"))})))};var N=function(e){var t=e.day,a=e.index;return l.a.createElement("div",{className:"day",key:a},l.a.createElement("h1",null,"Jour ",a+1),l.a.createElement("div",{className:"day-data"},l.a.createElement("div",null,"Total des paiements manqu\xe9s: ",t.dailyLoss,"\u20ac"),l.a.createElement("div",null,"Moyenne de d\xe9pense des clients: ",t.customersAverage,"\u20ac"),l.a.createElement(y,{customers:t.customers}),l.a.createElement(j,{missedPayments:t.missedPayments})))};var O=function(e){var t=e.days,a=e.costTotal,n=e.supplierTotal;return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"global-stats"},l.a.createElement("h3",null,"B\xe9n\xe9fices"),l.a.createElement("div",null,l.a.createElement("span",null,"B\xe9n\xe9fices des vendeurs:")," ",l.a.createElement("span",null,n,"\u20ac")),l.a.createElement("div",null,l.a.createElement("span",null,l.a.createElement("i",{className:"fa fa-minus icon"}),"Total des frais:")," ",l.a.createElement("span",null,a,"\u20ac")),l.a.createElement("div",null,"_________________________"),l.a.createElement("div",null,l.a.createElement("span",null,"B\xe9n\xe9fices net du march\xe9:")," ",l.a.createElement("span",null,n-a,"\u20ac")),l.a.createElement("div",{class:"divider"},"_________________________________________________________"),t.map((function(e,t){return l.a.createElement(N,{day:e,key:t,index:t})}))),l.a.createElement("div",{className:"global-stats"},l.a.createElement("h3",null,"Statistiques"),function(){for(var e=Object.values(t),a=0,n=0,r=0,s=e;r<s.length;r++){var c=s[r];a+=c.customersAverage,n+=Object.keys(c.customers).length}return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("span",null,"Moyenne des d\xe9penses:")," ",l.a.createElement("span",null,a/(e.length||1),"\u20ac")),l.a.createElement("div",null,l.a.createElement("span",null,"Quantit\xe9 de fiches pay\xe9es:")," ",l.a.createElement("span",null,n)))}(),l.a.createElement("div",null,"_________________________")))},k=a(15),w=function(){},T=function(e){e.value;var t=e.label,a=void 0===t?"Upload":t,n=e.onChange,r=void 0===n?w:n,s=Object(k.a)(e,["value","label","onChange"]);return l.a.createElement("span",null,l.a.createElement("label",null,l.a.createElement("span",{className:"clickable"},a),l.a.createElement("input",Object.assign({},s,{style:{display:"none"},type:"file",onChange:function(e){r(Object(m.a)(e.target.files)),e.target.value=null},multiple:!0}))))};a(30);var S=function(e){var t=e.eventAccounting,a=e.save,r=Object(n.useState)(t.room||0),s=Object(c.a)(r,2),u=s[0],i=s[1],o=Object(n.useState)(t.transaction||0),m=Object(c.a)(o,2),p=m[0],v=m[1],d=Object(n.useState)(t.insurance||0),f=Object(c.a)(d,2),_=f[0],E=f[1],h=Object(n.useState)(t.paper||0),b=Object(c.a)(h,2),g=b[0],y=b[1],j=Object(n.useState)(t.stamps||0),N=Object(c.a)(j,2),O=N[0],k=N[1],w=Object(n.useState)(t.groceries||0),T=Object(c.a)(w,2),S=T[0],C=T[1],F=Object(n.useState)(t.traiteur||0),A=Object(c.a)(F,2),R=A[0],x=A[1],B=Object(n.useState)(t.schmitz||0),P=Object(c.a)(B,2),q=P[0],I=P[1],L=Object(n.useState)(t.other||0),M=Object(c.a)(L,2),z=M[0],D=M[1];return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"form"},l.a.createElement("h1",null,"D\xe9penses"),l.a.createElement("div",{className:"input-grid"},l.a.createElement("div",null,l.a.createElement("span",null,"Salle: "),l.a.createElement("input",{onChange:function(e){i(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:u})," \u20ac"),l.a.createElement("div",null,l.a.createElement("span",null,"Transactions: "),l.a.createElement("input",{onChange:function(e){v(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:p})," \u20ac"),l.a.createElement("div",null,l.a.createElement("span",null,"Assurance: "),l.a.createElement("input",{onChange:function(e){E(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:_})," \u20ac"),l.a.createElement("div",null,l.a.createElement("span",null,"Papeterie: "),l.a.createElement("input",{onChange:function(e){y(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:g})," \u20ac"),l.a.createElement("div",null,l.a.createElement("span",null,"Timbres: "),l.a.createElement("input",{onChange:function(e){k(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:O})," \u20ac"),l.a.createElement("div",null,l.a.createElement("span",null,"Courses: "),l.a.createElement("input",{onChange:function(e){C(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:S})," \u20ac"),l.a.createElement("div",null,l.a.createElement("span",null,"Traiteur: "),l.a.createElement("input",{onChange:function(e){x(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:R})," \u20ac"),l.a.createElement("div",null,l.a.createElement("span",null,"Schmitz: "),l.a.createElement("input",{onChange:function(e){I(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:q})," \u20ac"),l.a.createElement("div",null,l.a.createElement("span",null,"Autre: "),l.a.createElement("input",{onChange:function(e){D(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:z})," \u20ac")),l.a.createElement("div",{className:"form-button noselect",onClick:function(){a({room:u,transaction:p,insurance:_,paper:g,stamps:O,groceries:S,traiteur:R,schmitz:q,other:z})}},l.a.createElement("span",null,"ENREGISTRER"))))},C=function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(_.a)(this,a),(n=t.call(this))._readFile=function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FileReader).readAsText(t),e.abrupt("return",new Promise((function(e){a.onload=function(t){e(a.result)}})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n._processFiles=function(){var e=Object(f.a)(d.a.mark((function e(t){var a,l,r,s,c,u,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],l={},r=Object(p.a)(t),e.prev=3,r.s();case 5:if((s=r.n()).done){e.next=15;break}return c=s.value,e.next=9,n._readFile(c);case 9:u=e.sent,i=n._computeFile(u,l),l=i.suppliers,a.push(i.day);case 13:e.next=5;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),r.e(e.t0);case 20:return e.prev=20,r.f(),e.finish(20);case 23:n.setState({days:a,suppliers:l});case 24:case"end":return e.stop()}}),e,null,[[3,17,20,23]])})));return function(t){return e.apply(this,arguments)}}(),n._computeFile=function(e,t){var a,l=e.split(/\r\n|\n/),r=Object(p.a)(Array(1));try{for(r.s();!(a=r.n()).done;){a.value;l.shift()}}catch(i){r.e(i)}finally{r.f()}l.shift().split(",");for(var s={};l.length;){var c=l.shift().split(",");c[0]&&(s[c[0]]=s[c[0]]||{paid:[],paidTotal:0,supplied:[],suppliedTotal:0},s[c[0]].paidTotal+=Number(c[3].replace(",",".")),s[c[0]].paid.push({name:c[2],price:c[3],supplierId:c[1]})),c[4]&&c[5]&&(s[c[5]]=s[c[5]]||{paid:[],paidTotal:0,supplied:[],suppliedTotal:0},s[c[5]].suppliedTotal+=Number(c[7].replace(",",".")),s[c[5]].supplied.push({name:c[6],price:c[7],supplierId:c[4]}),t[c[4]]=t[c[4]]||{total:0},t[c[4]].total+=Number(c[7].replace(",",".")))}var u=n._computeDailyStats(s);return{day:{customers:s,missedPayments:u.missedPayments,dailyLoss:u.dailyLoss,customersAverage:u.customersAverage},suppliers:t}},n._computeDailyStats=function(e){for(var t={},a=0,n=0,l=Object.keys(e),r=0,s=l;r<s.length;r++){var c=s[r],u=e[c].paidTotal,i=e[c].suppliedTotal-u;n+=u,0!==i&&(t[c]=i,a+=i)}return{missedPayments:t,dailyLoss:a,customersTotal:n,customersAverage:n/(l.length||0)}},n.onFileInputChange=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({files:[].concat(Object(m.a)(n.state.files),Object(m.a)(t))});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onEventFormSave=function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=0,Object.values(t).forEach((function(e){return a+=e})),n.setState({eventAccounting:t,costTotal:a,showForm:!1}),n.computeResults();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.computeResults=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._processFiles(n.state.files);case 2:t=0,Object.values(n.state.suppliers).forEach((function(e){return t+=e.total})),n.setState({supplierTotal:t});case 5:case"end":return e.stop()}}),e)}))),n.resetFiles=function(){n.setState({files:[],days:[],pages:[],supplierTotal:0}),n.toggleReset()},n.toggleReset=function(){n.setState({resetRequested:!n.state.resetRequested})},n.toggleEventForm=function(){n.setState({showForm:!n.state.showForm})},n.state={files:[],days:[],suppliers:{},resetRequested:!1,showForm:!1,eventAccounting:{},supplierTotal:0,costTotal:0},n}return Object(E.a)(a,[{key:"_getButtons",value:function(){var e=[];this.state.files.length&&(e=[{content:"Retirer les fichiers",fa:"fa-trash",className:"warning",callBack:this.toggleReset}]),this.state.resetRequested&&(e=[{content:"Annuler",fa:"fa-times",className:"green",callBack:this.toggleReset},{content:"Confirmer",fa:"fa-check",className:"alert",callBack:this.resetFiles}]);var t=[{className:"blue",fa:"fa-upload",content:l.a.createElement(T,{label:"Ajouter | jours: ".concat(this.state.files.length),className:"noselect",value:this.state.files,onChange:this.onFileInputChange})},{className:(this.state.showForm?"active":"")+" purple",fa:"fa-eur",content:"Comptabilit\xe9",callBack:this.toggleEventForm}].concat(e);return this.state.files.length&&!this.state.showForm&&t.push({content:"Calculer",fa:"fa-plus",className:"green",callBack:this.computeResults}),t}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(g,{buttons:this._getButtons()}),this.state.showForm?l.a.createElement(S,{eventAccounting:this.state.eventAccounting,save:this.onEventFormSave}):l.a.createElement(O,{days:this.state.days,costTotal:this.state.costTotal,supplierTotal:this.state.supplierTotal}))}}]),a}(l.a.Component);a(31);var F=function(e){var t=Object(n.useState)({open:!1}),a=Object(c.a)(t,2),r=a[0],s=a[1];return l.a.createElement("div",{className:"page"},r.open?l.a.createElement("div",{className:"page"},l.a.createElement(C,{menu:""})):l.a.createElement("div",{className:"page clickable",onClick:function(){s({open:!r.open})}},l.a.createElement(o,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[16,1,2]]]);
//# sourceMappingURL=main.ec05ad84.chunk.js.map