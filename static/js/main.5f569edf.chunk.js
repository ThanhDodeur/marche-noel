(this["webpackJsonpmarche-noel"]=this["webpackJsonpmarche-noel"]||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/snowflake.c1c98c92.svg"},,,,,,,function(e,t,a){e.exports=a(31)},,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(8),l=a.n(r),c=(a(21),a(13)),i=a(9),o=a.n(i);a(22);var u=function(e){return s.a.createElement("div",{className:"accueil noselect"},s.a.createElement("img",{src:o.a,className:"App-logo",alt:"logo"}),s.a.createElement("p",null,"March\xe9 de No\xebl"))},p=a(4),m=a(6),f=a(1),d=a.n(f),v=a(5),h=a(10),y=a(11),g=a(14),E=a(12);a(24),a(25);var b=function(e){var t=e.buttons,a=void 0===t?[]:t;return s.a.createElement("nav",{className:"navbar"},a.map((function(e,t){return s.a.createElement("div",{key:t,className:"nav-button clickable noselect ".concat(e.className),onClick:e.callBack},s.a.createElement("span",null,e.fa&&s.a.createElement("i",{className:"fa ".concat(e.fa," inline spaced")}),s.a.createElement("span",{className:"inline"},e.content)))})))};a(26),a(27),a(28);var k=function(e){var t=e.customers;return s.a.createElement("div",null,s.a.createElement("h2",null,"Liste Client:"),Object.keys(t).map((function(e){return s.a.createElement("div",{className:"entry",key:"cust_"+e},s.a.createElement("span",null,"[client: ",e,"] - "),s.a.createElement("span",null,"total pay\xe9: ",t[e].paidTotal,"\u20ac"),s.a.createElement("span",null," | "),s.a.createElement("span",null,"a re\xe7u pour un total de: ",t[e].suppliedTotal,"\u20ac"))})))};a(29);var N=function(e){var t=e.missedPayments;return s.a.createElement("div",null,s.a.createElement("h2",null,"Paiements incorrectes:"),Object.keys(t).map((function(e){return s.a.createElement("div",{className:"entry",key:"missed_"+e},s.a.createElement("span",null,"[client: ",e,"] - "),s.a.createElement("span",null,"Argent Manquant: ",t[e],"\u20ac"))})))};var j=function(e){var t=e.day,a=e.index;return s.a.createElement("div",{className:"day",key:a},s.a.createElement("h1",null,"Jour ",a+1),s.a.createElement("div",null,"Perte totale: ",t.dailyLoss,"\u20ac"),s.a.createElement(k,{customers:t.customers}),s.a.createElement(N,{missedPayments:t.missedPayments}))};var O=function(e){var t=e.days;return s.a.createElement("div",{className:"content"},t.map((function(e,t){return s.a.createElement(j,{day:e,key:t,index:t})})))},w=a(15),x=function(){},C=function(e){e.value;var t=e.label,a=void 0===t?"Upload":t,n=e.onChange,r=void 0===n?x:n,l=Object(w.a)(e,["value","label","onChange"]);return s.a.createElement("span",null,s.a.createElement("label",null,s.a.createElement("span",{className:"clickable"},a),s.a.createElement("input",Object.assign({},l,{style:{display:"none"},type:"file",onChange:function(e){r(Object(p.a)(e.target.files)),e.target.value=null},multiple:!0}))))},R=function(e){Object(g.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this))._readFile=function(){var e=Object(v.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FileReader).readAsText(t),e.abrupt("return",new Promise((function(e){a.onload=function(t){e(a.result)}})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n._processFiles=function(){var e=Object(v.a)(d.a.mark((function e(t){var a,s,r,l,c,i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],s=Object.assign({},n.state.suppliers),r=Object(m.a)(t),e.prev=3,r.s();case 5:if((l=r.n()).done){e.next=15;break}return c=l.value,e.next=9,n._readFile(c);case 9:i=e.sent,o=n._computeFile(i,s),s=o.suppliers,a.push(o.day);case 13:e.next=5;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),r.e(e.t0);case 20:return e.prev=20,r.f(),e.finish(20);case 23:n.setState({days:a,suppliers:s});case 24:case"end":return e.stop()}}),e,null,[[3,17,20,23]])})));return function(t){return e.apply(this,arguments)}}(),n._computeFile=function(e,t){var a,s=e.split(/\r\n|\n/),r=Object(m.a)(Array(1));try{for(r.s();!(a=r.n()).done;){a.value;s.shift()}}catch(o){r.e(o)}finally{r.f()}s.shift().split(",");for(var l={};s.length;){var c=s.shift().split(",");c[0]&&(l[c[0]]=l[c[0]]||{paid:[],paidTotal:0,supplied:[],suppliedTotal:0},l[c[0]].paidTotal+=Number(c[3].replace(",",".")),l[c[0]].paid.push({name:c[2],price:c[3],supplierId:c[1]})),c[4]&&c[5]&&(l[c[5]]=l[c[5]]||{paid:[],paidTotal:0,supplied:[],suppliedTotal:0},l[c[5]].suppliedTotal+=Number(c[7].replace(",",".")),l[c[5]].supplied.push({name:c[6],price:c[7],supplierId:c[4]}),t[c[4]]=t[c[4]]||{total:0},t[c[4]].total+=Number(c[7].replace(",",".")))}var i=n._computeMissedPayments(l);return{day:{customers:l,missedPayments:i.missedPayments,dailyLoss:i.dailyLoss},suppliers:t}},n._computeMissedPayments=function(e){for(var t={},a=0,n=0,s=Object.keys(e);n<s.length;n++){var r=s[n],l=e[r].suppliedTotal-e[r].paidTotal;0!==l&&(t[r]=l,a+=l)}return{missedPayments:t,dailyLoss:a}},n.onFileInputChange=function(){var e=Object(v.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({files:[].concat(Object(p.a)(n.state.files),Object(p.a)(t))});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.computeResults=Object(v.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._processFiles(n.state.files);case 2:case"end":return e.stop()}}),e)}))),n.resetFiles=function(){n.setState({files:[],days:[],pages:[]}),n.toggleReset()},n.toggleReset=function(){n.setState({resetRequested:!n.state.resetRequested})},n.state={files:[],days:[],suppliers:{},resetRequested:!1},n}return Object(y.a)(a,[{key:"_getButtons",value:function(){var e=[];this.state.files.length&&(e=[{content:"Retirer les fichiers",fa:"fa-trash",className:"warning",callBack:this.toggleReset}]),this.state.resetRequested&&(e=[{content:"Annuler",fa:"fa-times",className:"green",callBack:this.toggleReset},{content:"Confirmer",fa:"fa-check",className:"alert",callBack:this.resetFiles}]);var t=[{className:"blue",fa:"fa-upload",content:s.a.createElement(C,{label:"Ajouter | jours: ".concat(this.state.files.length),className:"noselect",value:this.state.files,onChange:this.onFileInputChange})}].concat(e);return this.state.files.length&&t.push({content:"Calculer",fa:"fa-plus",className:"green",callBack:this.computeResults}),t}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(b,{buttons:this._getButtons()}),!!this.state.days.length&&s.a.createElement(O,{days:this.state.days}))}}]),a}(s.a.Component);a(30);var _=function(e){var t=Object(n.useState)({open:!1}),a=Object(c.a)(t,2),r=a[0],l=a[1];return s.a.createElement("div",{className:"page"},r.open?s.a.createElement("div",{className:"page"},s.a.createElement(R,{menu:""})):s.a.createElement("div",{className:"page clickable",onClick:function(){l({open:!r.open})}},s.a.createElement(u,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[16,1,2]]]);
//# sourceMappingURL=main.5f569edf.chunk.js.map