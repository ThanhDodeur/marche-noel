(this["webpackJsonpmarche-noel"]=this["webpackJsonpmarche-noel"]||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/snowflake.c1c98c92.svg"},,,,,,,function(e,t,a){e.exports=a(34)},,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(9),c=a.n(r),l=(a(22),a(3)),i=a(10),u=a.n(i);a(23);var o=function(e){return s.a.createElement("div",{className:"accueil noselect"},s.a.createElement("img",{src:u.a,className:"App-logo",alt:"logo"}),s.a.createElement("p",null,"March\xe9 de No\xebl"))},p=a(6),m=a(11),d=a(1),f=a.n(d),v=a(7),h=a(2),g=a(12),E=a(13),y=a(15),b=a(14),_=(a(25),0);function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";return _++,"".concat(e).concat(_)}a(26);var N=function(e){var t=e.buttons,a=void 0===t?[]:t;return s.a.createElement("nav",{className:"navbar"},a.map((function(e,t){return s.a.createElement("div",{key:t,className:"nav-button clickable noselect ".concat(e.className),onClick:e.callBack},s.a.createElement("span",null,e.fa&&s.a.createElement("i",{className:"fa ".concat(e.fa," inline spaced")}),s.a.createElement("span",{className:"inline"},e.content)))})))};a(27);var j=function(e){var t=e.messageIds,a=e.messages;return s.a.createElement("div",{className:"popups"},t.map((function(e){var t=a[e];return s.a.createElement("div",{key:e,className:"popup "+t.type},s.a.createElement("span",null,t.title),t.content)})))};a(28),a(29),a(30);var O=function(e){var t=e.customers;return s.a.createElement("div",null,s.a.createElement("h2",null,"Liste Client:"),Object.keys(t).map((function(e){return s.a.createElement("div",{className:"entry",key:"cust_"+e},s.a.createElement("span",null,"[client: ",e,"] - "),s.a.createElement("span",null,"total pay\xe9: ",t[e].paidTotal,"\u20ac"),s.a.createElement("span",null," | "),s.a.createElement("span",null,"a re\xe7u pour un total de: ",t[e].suppliedTotal,"\u20ac"))})))};a(31);var x=function(e){var t=e.missedPayments;return s.a.createElement("div",null,s.a.createElement("h2",null,"Paiements incorrectes:"),Object.keys(t).map((function(e){return s.a.createElement("div",{className:"entry",key:"missed_"+e},s.a.createElement("span",null,"[client: ",e,"] - "),s.a.createElement("span",null,"Argent Manquant: ",t[e],"\u20ac"))})))};var w=function(e){var t=e.day,a=e.index,n=e.dailyAccounting;return s.a.createElement("div",{className:"day",key:a},s.a.createElement("h1",null,t.dayName),s.a.createElement("div",{className:"day-data"},s.a.createElement("div",null,"Total des paiements manqu\xe9s: ",t.dailyLoss,"\u20ac"),s.a.createElement("div",null,"Tickets de tombola vendus: ",function(e){return n[e]&&n[e].tombolaTickets}(t.dayName)),s.a.createElement("div",null,"Moyenne des d\xe9penses des clients: ",t.customersAverage,"\u20ac"),s.a.createElement("div",null,"Moyenne des objets re\xe7u par les clients: ",t.obtainedAverage,"\u20ac"),s.a.createElement(O,{customers:t.customers}),s.a.createElement(x,{missedPayments:t.missedPayments})))};var T=function(e){var t=e.days,a=e.costTotal,n=e.supplierTotal,r=e.dailyAccounting,c=e.ticketPrice;function l(){for(var e=0,t=0,a=Object.values(r);t<a.length;t++){e+=a[t].tombolaTickets||0}return e}return s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"global-stats"},s.a.createElement("h3",null,"B\xe9n\xe9fices"),s.a.createElement("div",null,s.a.createElement("span",null,"B\xe9n\xe9fices des vendeurs:")," ",s.a.createElement("span",{className:"value-display"},n,"\u20ac")),s.a.createElement("div",null,s.a.createElement("span",null,"Vente de tombola:")),s.a.createElement("div",null,s.a.createElement("span",null,l()," x ",c,"\u20ac: "),s.a.createElement("span",{className:"value-display"},c*l(),"\u20ac ")),s.a.createElement("div",null,s.a.createElement("span",null,s.a.createElement("i",{className:"fa fa-minus icon"}),"Total des frais: "),s.a.createElement("span",{className:"value-display"},a,"\u20ac")),s.a.createElement("div",{className:"separated"},s.a.createElement("span",null,"B\xe9n\xe9fices net du march\xe9: "),s.a.createElement("span",{className:"value-display"},n+c*l()-a,"\u20ac")),!!t.length&&s.a.createElement("span",{className:"divider"},"_________________________________________________________"),t.map((function(e,t){return s.a.createElement(w,{day:e,key:t,dailyAccounting:r,index:t})}))),s.a.createElement("div",{className:"global-stats"},s.a.createElement("h3",null,"Statistiques (sur ",t.length," jour(s))"),function(){for(var e=Object.values(t),a=0,n=0,r=0,c=0,i=e;c<i.length;c++){var u=i[c];a+=u.customersAverage,n+=u.obtainedAverage,r+=Object.keys(u.customers).length}return s.a.createElement("div",{className:"daily-stats"},s.a.createElement("div",null,s.a.createElement("span",null,"Moyenne pay\xe9e par les clients:")," ",s.a.createElement("span",{className:"value-display"},a/(e.length||1),"\u20ac")),s.a.createElement("div",null,s.a.createElement("span",null,"Moyenne des articles re\xe7u:")," ",s.a.createElement("span",{className:"value-display"},n/(e.length||1),"\u20ac")),s.a.createElement("div",null,s.a.createElement("span",null,"Tickets de tombola Vendus:")," ",s.a.createElement("span",{className:"value-display"},l())),s.a.createElement("div",null,s.a.createElement("span",null,"Quantit\xe9 de fiches pay\xe9es:")," ",s.a.createElement("span",{className:"value-display"},r)))}()))},A=a(16),S=function(){},F=function(e){e.value;var t=e.label,a=void 0===t?"Upload":t,n=e.onChange,r=void 0===n?S:n,c=Object(A.a)(e,["value","label","onChange"]);return s.a.createElement("span",null,s.a.createElement("label",null,s.a.createElement("span",{className:"clickable"},a),s.a.createElement("input",Object.assign({},c,{style:{display:"none"},type:"file",onChange:function(e){r(Object(p.a)(e.target.files)),e.target.value=null}}))))};a(32);var P=function(e){var t=e.eventExpenses,a=e.dailyAccounting,r=e.ticketPrice,c=e.dayList,i=e.save,u=Object(n.useState)(t||{}),o=Object(l.a)(u,2),p=o[0],m=o[1],d=Object(n.useState)(r||0),f=Object(l.a)(d,2),v=f[0],h=f[1],g=Object(n.useState)(a||{}),E=Object(l.a)(g,2),y=E[0],b=E[1],_=["Salle","Transactions","Assurance","Papeterie","Timbres","Courses","Traiteur","Schmitz","Autre"];function k(e){return y&&y[e]&&y[e].tombolaTickets||0}function N(e){return p[e]||0}return Object(n.useEffect)((function(){return function(){i({eventExpenses:p,ticketPrice:v,dailyAccounting:y})}}),[i,p,v,y]),s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"form"},s.a.createElement("div",{className:"input-grid left"},_.map((function(e){return s.a.createElement("div",null,s.a.createElement("span",{className:"accounting-span"},e,": "),s.a.createElement("input",{className:"accounting-input",onChange:function(t){!function(e,t){var a=Object.assign({},p);a[e]=t,m(a)}(e,Number(t.target.value))},pattern:"[0-9]*",type:"number",value:N(e)})," \u20ac")}))),s.a.createElement("div",{className:"input-grid right"},s.a.createElement("div",null,s.a.createElement("span",{className:"accounting-span"}," Prix des tickets: "),s.a.createElement("input",{className:"accounting-input",onChange:function(e){h(Number(e.target.value))},pattern:"[0-9]*",type:"number",value:v}),"\u20ac"),c.map((function(e){return s.a.createElement("div",null,s.a.createElement("h3",null,e),s.a.createElement("div",null,s.a.createElement("span",{className:"accounting-span"}," Tickets de tombola: "),s.a.createElement("input",{className:"accounting-input",onChange:function(t){!function(e,t){var a=Object.assign({},y);a[e]||(a[e]={}),a[e].tombolaTickets=t,b(a)}(e,Number(t.target.value))},pattern:"[0-9]*",type:"number",value:k(e)})))})))))},R=function(e){Object(y.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(g.a)(this,a),(n=t.call(this))._addMessage=function(){var e=Object(h.a)(f.a.mark((function e(t,a,s,r){var c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=r||5e3,s=s||"info",c=k("message"),e.next=5,n.setState({popupIds:n.state.popupIds.concat(c),popups:Object.assign({},n.state.popups,Object(v.a)({},c,{title:t,content:a,type:s}))});case 5:setTimeout(Object(h.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.popupIds.filter((function(e){return e!==c})),delete(a=Object.assign({},n.state.popups))[c],e.next=5,n.setState({popupIds:t,popups:a});case 5:case"end":return e.stop()}}),e)}))),r);case 6:case"end":return e.stop()}}),e)})));return function(t,a,n,s){return e.apply(this,arguments)}}(),n._readFile=function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=new FileReader).readAsText(t),e.abrupt("return",new Promise((function(e){a.onload=function(t){e(a.result)}})));case 6:return e.prev=6,e.t0=e.catch(0),n._addMessage("ERREUR",e.t0.message,"error"),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),n._removeFile=function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete(a=Object.assign({},n.state.files))[t],e.next=4,n.setState({files:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n._processFiles=function(){var e=Object(h.a)(f.a.mark((function e(t){var a,s,r,c,i,u,o,p,m,d;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],s={},r=0,c=0,i=Object.entries(t);case 4:if(!(c<i.length)){e.next=19;break}return u=Object(l.a)(i[c],2),o=u[0],p=u[1],e.next=8,n._readFile(p);case 8:if(m=e.sent){e.next=13;break}return e.next=12,n._removeFile(o);case 12:return e.abrupt("continue",16);case 13:d=n._computeFile({dayName:o,page:m,suppliers:s}),s=d.suppliers,a.push(d.day);case 16:c++,e.next=4;break;case 19:return Object.values(s).forEach((function(e){return r+=e.total})),e.abrupt("return",{days:a,suppliers:s,supplierTotal:r});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n._computeFile=function(e){var t=e.dayName,a=e.page,s=e.suppliers,r=a.split(/\r\n|\n/);!function e(t){return function(a){t>0&&(a(),e(t-1)(a))}}(1)((function(){return r.shift()})),r.shift().split(",");for(var c={};r.length;){var l=r.shift().split(",");l[0]&&(c[l[0]]=c[l[0]]||{paid:[],paidTotal:0,supplied:[],suppliedTotal:0},c[l[0]].paidTotal+=Number(l[3].replace(",",".")),c[l[0]].paid.push({name:l[2],price:l[3],supplierId:l[1]})),l[4]&&l[5]&&(c[l[5]]=c[l[5]]||{paid:[],paidTotal:0,supplied:[],suppliedTotal:0},c[l[5]].suppliedTotal+=Number(l[7].replace(",",".")),c[l[5]].supplied.push({name:l[6],price:l[7],supplierId:l[4]}),s[l[4]]=s[l[4]]||{total:0},s[l[4]].total+=Number(l[7].replace(",",".")))}var i=n._computeDailyStats(c);return{day:{dayName:t,customers:c,missedPayments:i.missedPayments,dailyLoss:i.dailyLoss,customersAverage:i.customersAverage,obtainedAverage:i.obtainedAverage},suppliers:s}},n._computeDailyStats=function(e){for(var t={},a=0,n=0,s=0,r=Object.keys(e),c=0,l=r;c<l.length;c++){var i=l[c],u=e[i].paidTotal,o=e[i].suppliedTotal,p=o-u;s+=o,n+=u,0!==p&&(t[i]=p,a+=p)}return{missedPayments:t,dailyLoss:a,customersTotal:n,customersAverage:n/(r.length||0),obtainedAverage:s/(r.length||0)}},n.onFileInputChange=function(){var e=Object(h.a)(f.a.mark((function e(t,a){var s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((s=t[0]).name.includes(".csv")){e.next=4;break}return n._addMessage("ERREUR","Le fichier doit \xeatre un .csv","error",8e3),e.abrupt("return");case 4:return e.next=6,n.setState({files:Object.assign({},n.state.files,Object(v.a)({},a,s))});case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.onEventFormSave=function(){var e=Object(h.a)(f.a.mark((function e(t){var a,s,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.eventExpenses,s=t.dailyAccounting,r=t.ticketPrice,c=0,Object.values(a).forEach((function(e){return c+=e})),e.next=5,n.setState({eventExpenses:a,ticketPrice:r,dailyAccounting:s,costTotal:c});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n._computeResults=Object(h.a)(f.a.mark((function e(){var t,a,s,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._processFiles(n.state.files);case 2:return t=e.sent,a=t.days,s=t.suppliers,r=t.supplierTotal,e.next=8,n.setState({days:a,suppliers:s,supplierTotal:r});case 8:case"end":return e.stop()}}),e)}))),n.resetFiles=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({files:[],days:[],pages:[],supplierTotal:0});case 2:n.toggleReset();case 3:case"end":return e.stop()}}),e)}))),n.toggleReset=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({resetRequested:!n.state.resetRequested});case 2:case"end":return e.stop()}}),e)}))),n.toggleEventForm=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.showForm,e.next=3,n.setState({showForm:!t});case 3:t&&n._computeResults();case 4:case"end":return e.stop()}}),e)}))),n._toggleHelp=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({displayHelp:!n.state.displayHelp});case 2:case"end":return e.stop()}}),e)}))),n.state={files:{},days:[],suppliers:{},resetRequested:!1,showForm:!1,displayHelp:!1,eventExpenses:{},dailyAccounting:{},supplierTotal:0,costTotal:0,ticketPrice:0,popupIds:[],popups:{}},n.DAYS=["Vendredi","Samedi","Dimanche"],n}return Object(E.a)(a,[{key:"_getButtons",value:function(){var e,t=this,a=[{className:(this.state.showForm?"active":"")+" purple",fa:"fa-eur",content:"Comptabilit\xe9",callBack:this.toggleEventForm}],n=Object(m.a)(this.DAYS);try{var r=function(){var n=e.value;a.push({className:t.state.files[n]?"green":"alert",fa:"fa-upload",content:s.a.createElement(F,{label:n,className:"noselect",value:t.state.files[n],onChange:function(e){t.onFileInputChange(e,n)}})})};for(n.s();!(e=n.n()).done;)r()}catch(l){n.e(l)}finally{n.f()}var c=[];return Object.keys(this.state.files).length&&(c=[{content:"Retirer les fichiers",fa:"fa-trash",className:"warning",callBack:this.toggleReset}]),this.state.resetRequested&&(c=[{content:"Annuler",fa:"fa-times",className:"green",callBack:this.toggleReset},{content:"Confirmer",fa:"fa-check",className:"alert",callBack:this.resetFiles}]),a.push.apply(a,Object(p.a)(c)),!Object.keys(this.state.files).length||this.state.showForm||this.state.resetRequested||a.push({content:"Calculer",fa:"fa-plus",className:"green",callBack:this._computeResults}),a.push({content:"Aide",fa:"fa-circle",className:"green order-2 ml-auto",callBack:this._toggleHelp}),a}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(N,{buttons:this._getButtons()}),!!this.state.popupIds.length&&s.a.createElement(j,{messageIds:this.state.popupIds,messages:this.state.popups}),!!this.state.displayHelp&&s.a.createElement("div",{className:"help"},s.a.createElement("div",{className:"help-link ml-auto"},s.a.createElement("a",{className:"help-text",target:"new",href:"https://docs.google.com/spreadsheets/d/1UKT38_RUa3MQ_HEGtWgaPKvedD35wYksaj7-T0sc9N8/edit?usp=sharing"},"Fiche \xe0 remplire"),s.a.createElement("i",{className:"fa fa-file-excel-o"})),s.a.createElement("div",{className:"help-link ml-auto"},s.a.createElement("a",{className:"help-text",target:"new",href:"https://drive.google.com/file/d/18Cs7Gyetq9kGnfS8gg4BnLfDHVo5YATV/view?usp=sharing"},"Vid\xe9o d'explication"),s.a.createElement("i",{className:"fa fa-play"}))),this.state.showForm?s.a.createElement(P,{eventExpenses:this.state.eventExpenses,dailyAccounting:this.state.dailyAccounting,dayList:this.DAYS,ticketPrice:this.state.ticketPrice,save:this.onEventFormSave}):s.a.createElement(T,{days:this.state.days,dailyAccounting:this.state.dailyAccounting,ticketPrice:this.state.ticketPrice,costTotal:this.state.costTotal,supplierTotal:this.state.supplierTotal}))}}]),a}(s.a.Component);a(33);var C=function(e){var t=Object(n.useState)({open:!1}),a=Object(l.a)(t,2),r=a[0],c=a[1];return s.a.createElement("div",{className:"page"},r.open?s.a.createElement("div",{className:"page"},s.a.createElement(R,{menu:""})):s.a.createElement("div",{className:"page clickable",onClick:function(){c({open:!r.open})}},s.a.createElement(o,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[17,1,2]]]);
//# sourceMappingURL=main.7ac251f4.chunk.js.map